<!DOCTYPE html>

<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
  <!--<![endif]-->

  <!-- Head BEGIN -->

  <head>
    <meta charset="utf-8">
    <title>My Account | Metronic Shop UI</title>

    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <meta content="Metronic Shop UI description" name="description">
    <meta content="Metronic Shop UI keywords" name="keywords">
    <meta content="keenthemes" name="author">

    <meta property="og:site_name" content="-CUSTOMER VALUE-">
    <meta property="og:title" content="-CUSTOMER VALUE-">
    <meta property="og:description" content="-CUSTOMER VALUE-">
    <meta property="og:type" content="website">
    <meta property="og:image" content="-CUSTOMER VALUE-"><!-- link to image for socio -->
    <meta property="og:url" content="-CUSTOMER VALUE-">

    <link rel="shortcut icon" href="favicon.ico">

    <!-- Fonts START -->
    <link
      href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700|PT+Sans+Narrow|Source+Sans+Pro:200,300,400,600,700,900&amp;subset=all"
      rel="stylesheet" type="text/css">
    <!-- Fonts END -->

    <!-- Global styles START -->
    <link href="assets/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Global styles END -->

    <!-- Page level plugin styles START -->
    <link href="assets/plugins/fancybox/source/jquery.fancybox.css" rel="stylesheet">
    <link href="assets/plugins/owl.carousel/assets/owl.carousel.css" rel="stylesheet">
    <link href="assets/plugins/css/jquery-confirm.min.css" rel="stylesheet">
    <link href="assets/plugins/css/pnotify.css" rel="stylesheet">
    <!-- Page level plugin styles END -->

    <!-- Theme styles START -->
    <link href="assets/pages/css/components.css" rel="stylesheet">
    <link href="assets/corporate/css/style.css" rel="stylesheet">
    <link href="assets/pages/css/style-shop.css" rel="stylesheet" type="text/css">
    <link href="assets/corporate/css/style-responsive.css" rel="stylesheet">
    <link href="assets/corporate/css/themes/red.css" rel="stylesheet" id="style-color">
    <link href="assets/corporate/css/custom.css" rel="stylesheet">
    <!-- Theme styles END -->
  </head>
  <!-- Head END -->

  <!-- Body BEGIN -->

  <body class="ecommerce">
    <header class="header"></header>

    <div class="main">
      <div class="container">
        <ul class="breadcrumb">
          <li><a href="index.html">Home</a></li>
          <li><a href="">Store</a></li>
          <li class="active">My Account Page</li>
        </ul>
        <!-- BEGIN SIDEBAR & CONTENT -->
        <div class="row margin-bottom-40">
          <!-- BEGIN SIDEBAR -->
          <div class="sidebar col-md-3 col-sm-3">
            <ul class="list-group margin-bottom-25 sidebar-menu">
              <li class="list-group-item clearfix"><a href="javascript:;"><i class="fa fa-angle-right"></i>
                  Login/Register</a></li>
              <li class="list-group-item clearfix"><a href="javascript:;"><i class="fa fa-angle-right"></i> Restore
                  Password</a></li>
              <li class="list-group-item clearfix"><a href="javascript:;"><i class="fa fa-angle-right"></i> My
                  account</a></li>
              <li class="list-group-item clearfix"><a href="javascript:;"><i class="fa fa-angle-right"></i> Address
                  book</a></li>
              <li class="list-group-item clearfix"><a href="javascript:;"><i class="fa fa-angle-right"></i> Wish
                  list</a></li>
              <li class="list-group-item clearfix"><a href="javascript:;"><i class="fa fa-angle-right"></i> Returns</a>
              </li>
              <li class="list-group-item clearfix"><a href="javascript:;"><i class="fa fa-angle-right"></i>
                  Newsletter</a></li>
            </ul>
          </div>
          <!-- END SIDEBAR -->

          <!-- BEGIN CONTENT -->
          <div class="col-md-9 col-sm-7">
            <h1>My Account Page</h1>
            <div class="content-page">
              <!-- User Widget -->
              <div class="widget user-dashboard-profile">
                <!-- User Image -->
                <div class="profile-thumb text-center">
                  <img src="" alt="" class="rounded-circle">
                </div>
                <div class="user-dashboard-menu">
                  <ul>
                    <li>
                      <p><i class="fa fa-id-card"></i> 昵称
                        <input type="text" value="" class="form-control" placeholder="请输入昵称" name="nickname">
                      </p>
                    </li>
                    <li>
                      <p><i class="fa fa-user"></i> 真实姓名 <span></span></p>
                    </li>
                    <li>
                      <p><i class="fa fa-phone"></i> 手机号 <span></span></p>
                    </li>
                    <li>
                      <p><i class="fa fa-heart-o"></i> 爱心值 <span></span></p>
                    </li>
                    <li>
                      <p><i class="fa fa-star"></i> 推荐码<span></span></p>
                    </li>
                  </ul>
                </div>
              </div>

            </div>
          </div>
        </div>
        <!-- END CONTENT -->
      </div>
      <!-- END SIDEBAR & CONTENT -->
    </div>
    </div>

    <footer class="footer"></footer>

    <!-- Load javascripts at bottom, this will reduce page load time -->
    <!-- BEGIN CORE PLUGINS(REQUIRED FOR ALL PAGES) -->
    <!--[if lt IE 9]>
    <script src="assets/plugins/respond.min.js"></script>
    <![endif]-->
    <script src="assets/plugins/jquery.min.js" type="text/javascript"></script>
    <script src="assets/plugins/jquery-migrate.min.js" type="text/javascript"></script>
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="assets/corporate/scripts/back-to-top.js" type="text/javascript"></script>
    <script src="assets/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
    <script src="assets/plugins/js/jquery-confirm.min.js" type="text/javascript"></script>
    <script src="assets/plugins/js/pnotify.js" type="text/javascript"></script>
    <script src="assets/plugins/js/template-web.js" type="text/javascript"></script>
    <!-- END CORE PLUGINS -->

    <!-- BEGIN PAGE LEVEL JAVASCRIPTS (REQUIRED ONLY FOR CURRENT PAGE) -->
    <script src="assets/corporate/scripts/utils.js"></script>
    <script src="assets/corporate/scripts/request.js"></script>
    <script src="assets/plugins/fancybox/source/jquery.fancybox.pack.js" type="text/javascript"></script><!-- pop up -->
    <script src="assets/plugins/owl.carousel/owl.carousel.min.js" type="text/javascript"></script>
    <!-- slider for products -->

    <script src="assets/corporate/scripts/layout.js" type="text/javascript"></script>
    <script type="text/javascript">
      jQuery(document).ready(function () {
        Layout.init();
        Layout.initOWL();
        // Layout.initTwitter();
      });
    </script>
    <!-- END PAGE LEVEL JAVASCRIPTS -->
    <script>
      $('.header').load('./header.html', function (responseTxt, statusTxt, xhr) { })
      $('.footer').load('./footer.html', function (responseTxt, statusTxt, xhr) { })


      $(function () {
        function getUserInfo() {
          ajaxPromise({ url: `${baseUrl}/wx/user/info` }).then(res => {
            $('.profile-thumb img').attr('src', res.data.avatar ? res.data.avatar : '/assets/pages/img/people/img1-small.jpg')
            $('.profile-thumb img').attr('alt', res.data.realname)
            $(".user-dashboard-menu ul li").find('.fa-id-card').siblings().val(res.data.nickname)
            $(".user-dashboard-menu ul li").find('.fa-user').siblings().text(res.data.realname ? res.data.realname : '未认证')
            $(".user-dashboard-menu ul li").find('.fa-phone').siblings().text(res.data.mobile)
            $(".user-dashboard-menu ul li").find('.fa-heart-o').siblings().text(res.data.love)
            $(".user-dashboard-menu ul li").find('.fa-star').siblings().text(res.data.referralCode ? res.data.referralCode : '暂无')
          })
        }
        $('.user-dashboard-menu li p input[name="nickname"]').blur(function () {
          let params = JSON.stringify({
            nickname: $(this).val()
          })
          $.confirm({
            title: '修改!',
            content: '确认修改昵称吗?',
            buttons: {
              cancel: {
                text: '取消'
              },
              confirm: {
                text: '确认',
                btnClass: 'btn-blue',
                keys: ['enter', 'shift'],
                action: function () {
                  ajaxPromise({ type: 'post', contentType: 'application/json', url: `${baseUrl}/wx/user/nickname`, data: params }).then(res => {
                    ShowNotice(res.errmsg, '修改成功', 'success', 2000, true)
                  })
                }
              }
            }
          });
        })
        getUserInfo()
      })

    </script>
  </body>
  <!-- END BODY -->

</html>